<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>QualityControl: Post-processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QualityControl
   &#160;<span id="projectnumber">1.5.1</span>
   </div>
   <div id="projectbrief">O2 Data Quality Control Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_PostProcessing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Post-processing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="#the-post-processing-framework">The post-processing framework</a><ul>
<li><a href="#post-processing-interface">Post-processing interface</a></li>
<li><a href="#post-processing-task-configuration">Post-processing Task configuration</a><ul>
<li><a href="#triggers-configuration">Triggers configuration</a></li>
</ul>
</li>
<li><a href="#running-it">Running it</a></li>
<li><a href="#triggers">Triggers</a></li>
</ul>
</li>
<li><a href="#convenience-classes">Convenience classes</a><ul>
<li><a href="#the-trendingtask-class">The TrendingTask class</a><ul>
<li><a href="#trendingtask-configuration">TrendingTask configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>← Go back to Modules Development | ../README.md "↑ Go to the Table of Content ↑" | Continue to Advanced Topics →</p>
<h1>The post-processing framework</h1>
<p>This framework is intended for planned post-processing of objects generated by QC Tasks, Checks and correlating them with other data. The most common use-cases include correlation and trending of different properties of the detectors.</p>
<p>The users can write their own Post-processing Tasks or use the ones provided by the framework (see <a href="#convenience-classes">Convenience classes</a>) which are supposed to cover the usual needs. Post-processing Tasks run asynchronously to data-taking, but can be triggered by a set of selected events.</p>
<h2>Post-processing interface</h2>
<p>Any Post-processing Task should inherit PostProcessingInterface, which includes four methods:</p>
<ul>
<li><code>configure</code> (optional) - configures the task, given its name and a configuration interface.</li>
<li><code>initialize</code> - initializes the task and its data, given the event which it was triggered by.</li>
<li><code>update</code> - updates the task and its data, given the event which it was triggered by.</li>
<li><code>finalize</code> - finalizes the processing, given the event which it was triggered by.</li>
</ul>
<p>Interfaces to databases and other services are accesible via <code>ServiceRegistry</code>, which is an argument to the last three methods. They are invoked when any of the specified triggers is up, which can be:</p><ul>
<li>Start Of Run (SOR)</li>
<li>End Of Run (EOR)</li>
<li>Start Of Fill (SOF)</li>
<li>End Of Fill (EOF)</li>
<li>Periodic - triggers when a specified period of time passes</li>
<li>New Object - triggers when an object in QCDB is updated</li>
<li>Once - triggers only first time it is checked</li>
<li>Always - triggers each time it is checked</li>
</ul>
<p>Triggers are complemented with timestamps which correspond the time when trigger started to be valid, in form of ms since epoch, just like in CCDB and QCDB. For example, the periodic trigger will provide evenly spaced timestamps , even if the trigger is checked more rarely. The New Object trigger provide the timestamp of the updated object . These timestamps should be used to access databases, so any Post-processing Task can be rerun with any, arbitrary timestamps.</p>
<p>MonitorObjects may be saved by registering them in ObjectManager, similarly to normal QC Tasks (recommended, see examples linked below), or by using DatabaseInterface directly. Please note, that created objects have to registered in ObjectManager to make them accessible by Checks.</p>
<p>Please refer to <a href="https://github.com/AliceO2Group/QualityControl/blob/master/Modules/Skeleton/include/Skeleton/SkeletonPostProcessing.h"><code>SkeletonPostProcessing</code></a> for a minimal illustration of inheriting the interface, or to <a href="https://github.com/AliceO2Group/QualityControl/blob/master/Framework/include/QualityControl/TrendingTask.h"><code>TrendingTask</code></a> for a fully functional example. One can generate their own post-processing task by using the <code>o2-qc-module-configurator</code> helper, as described in the <a href="ModulesDevelopment.md#module-creation">Module Creation</a> chapter.</p>
<h2>Configuration</h2>
<p>Running the post-processing is configured in a similar manner as it is for QC Tasks and Checks - the configuration parameters are stored in a JSON file or in the Configuration database (at later development stage). The configuration's path should be passed to the application running a task.</p>
<p>This is a snippet of a JSON structure which configures a post-processing task:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;qc&quot;: {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;config&quot;: {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;      ...</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    },</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    &quot;postprocessing&quot;: {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      &quot;MyPostProcessingTask&quot;: {</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        &quot;active&quot;: &quot;true&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        &quot;className&quot;: &quot;o2::quality_control_modules::my_module::MyPPTask&quot;,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        &quot;moduleName&quot;: &quot;QcMyModule&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        &quot;detectorName&quot;: &quot;TST&quot;,</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        &quot;initTrigger&quot;: [</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;          &quot;SOR&quot;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        ],</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        &quot;updateTrigger&quot;: [</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;          &quot;10mins&quot;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        ],</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        &quot;stopTrigger&quot;: [</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;          &quot;EOR&quot;,</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;          &quot;10hours&quot;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        ]</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;      },</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      ...</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    }</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div></div><!-- fragment --><p> Each task is identified by its name (<code>MyPostProcessingTask</code>). One can activate it by setting the <code>"active"</code> field to <code>"true"</code>. The task is loaded given its full <code>"className"</code> and a <code>"moduleName"</code> where it is located. The <code>"detectorName"</code> might be used by tasks to store generated data in correct paths in QCDB. The <code>"initTrigger"</code>, <code>"updateTrigger"</code> and <code>"stopTrigger"</code> lists contain triggers which should invoke corresponding interface methods.</p>
<p>Checks can be applied to the results of Post-processing Tasks just as for normal QC Tasks. However, one should use data source type of <code>"PostProcessing"</code> instead of <code>"Task"</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;...</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &quot;checks&quot;: {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;      &quot;ExamplePPCheck&quot;: {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &quot;active&quot;: &quot;true&quot;,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &quot;className&quot;: &quot;o2::quality_control_modules::skeleton::SkeletonCheck&quot;,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &quot;moduleName&quot;: &quot;QcSkeleton&quot;,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        &quot;policy&quot;: &quot;OnAny&quot;,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        &quot;detectorName&quot;: &quot;TST&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        &quot;dataSource&quot;: [{</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;          &quot;type&quot;: &quot;PostProcessing&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;          &quot;name&quot;: &quot;ExampleTrend&quot;,</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;          &quot;MOs&quot;: [&quot;mean_of_histogram&quot;]</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        }]</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;      }</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    },</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;...</div></div><!-- fragment --><h3>Triggers configuration</h3>
<p>Each of the three methods can be invoked by one or more triggers. Below are listed the possible options (case insensitive).</p>
<ul>
<li><code>"sor"</code> or <code>"startofrun"</code> - Start Of Run</li>
<li><code>"eor"</code> or <code>"endofrun"</code> - End Of Run</li>
<li><code>"sof"</code> or <code>"startoffill"</code> - Start Of Fill</li>
<li><code>"eof"</code> or <code>"endoffill"</code> - End Of Fill</li>
<li><code>"\&lt;x\&gt;\&lt;sec/min/hour\&gt;"</code> - Periodic - triggers when a specified period of time passes. For example: "5min", "0.001 seconds", "10sec", "2hours".</li>
<li><code>"newobject:[qcdb/ccdb]:\&lt;path\&gt;"</code> - New Object - triggers when an object in QCDB or CCDB is updated. For example : <code>"newobject:qcdb:qc/TST/MO/QcTask/Example"</code></li>
<li><code>"once"</code> - Once - triggers only first time it is checked</li>
<li><code>"always"</code> - Always - triggers each time it is checked</li>
</ul>
<h2>Running it</h2>
<p>The post-processing tasks can be run in three ways. First uses the usual <code>o2-qc</code> executable which relies on DPL and it is the only one which allows to run checks over objects generated in post-processing tasks. This is will be one of two ways to run PP tasks in production. To try it out, use it like for any other QC configuration: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;o2-qc -b --config json://${QUALITYCONTROL_ROOT}/etc/postprocessing.json</div></div><!-- fragment --><p> All declared and active tasks in the configuration file will be run in parallel.</p>
<p>Debugging post-processing tasks might be easier when using the <code>o2-qc-run-postprocessing</code> application (only for development) or with <code>o2-qc-run-postprocessing-occ</code> (both development and production), as they are one-process executables, running only one, chosen task.</p>
<p>To run the basic example, use the command below. The <code>--config</code> parameter should point to the configuration file. The <code>--period</code> parameter specifies the time interval of checking the specified triggers (in seconds).</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;o2-qc-run-postprocessing --config json://${QUALITYCONTROL_ROOT}/etc/postprocessing.json --name ExamplePostprocessing --period 10</div></div><!-- fragment --><p>As it is configured to invoke each method only <code>"once"</code>, you will see it initializing, entering the update method, then finalizing the task and exiting.</p>
<p>This executable also allows to run a Post-processing task in batch mode, i.e. with selected timestamps (see the <code>--timestamps</code> argument). This way, one can rerun a task over old data, if such a task actually respects given timestamps.</p>
<p>To have more control over the state transitions or to run a standalone post-processing task in production, one should use <code>o2-qc-run-postprocessing-occ</code>. It is run almost exactly as the previously mentioned application, however one has to use <a href="https://github.com/AliceO2Group/Control/tree/master/occ#single-process-control-with-peanut"><code>peanut</code></a> to drive its state transitions and push the configuration.</p>
<p>To try it out locally, run the following in the first terminal window (we will try out a different task this time): </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;o2-qc-run-postprocessing-occ --name ExampleTrend --period 10</div></div><!-- fragment --><p> In the logs you will see a port number which listens for RPC commands. Remember it. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;no control port configured, defaulting to 47100</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;no role configured, defaulting to default-role</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;gRPC server listening on port 47100</div></div><!-- fragment --><p> In the second window, run the following. Use the port number from the output of the QC executable. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# If you haven&#39;t built it:</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;# aliBuild build Coconut --defaults o2-dataflow</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;alienv enter coconut/latest</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;OCC_CONTROL_PORT=47100 peanut</div></div><!-- fragment --><p> A simple terminal user interface will open, which will allow you to trigger state transitions. Use it to load the configuration by entering the path to the configuration file. The usual transition sequence, which you might want to try out, is CONFIGURE, START, STOP, RESET, EXIT.</p>
<h1>Convenience classes</h1>
<p>We aim to provide some convenience classes which should cover the most common post-processing use-cases. Everyone is free to propose extensions to them or write their own tasks for more specific usages taking these as a starting point.</p>
<h2>The TrendingTask class</h2>
<p><code>TrendingTask</code> is a post-processing task which uses a TTree to trend objects in the QC database and produce basic plots. The <a href="QuickStart.md#post-processing-example">Post-processing example</a> in the QuickStart showcases the possibilities of this class.</p>
<p>The following scheme shows how the class is designed. It can access <b>data sources</b> which are Monitor Objects and Quality Objects from the Quality Control Database - anything that is generated by other Tasks and Checks. In the future we will also support access to the CCDB.</p>
<p>The objects' characteristics which should be tracked are extracted by <b>Reductors</b> - simple plugins. The framework provides a set of Reductors for commonly used data structures, but any custom Reductor might be used as well.</p>
<p>All the values are stored in a <b>TTree</b>.Each data source forms a separate branch, with its leaves being the individual values. Additionally added columns include a <code>time</code> branch and a <code>metadata</code> branch (now consisting only of <code>runNumber</code>).</p>
<p>The TTree is stored back to the <b>QC database</b> each time it is updated. In addition, the class exposes the <a href="https://root.cern/doc/master/classTTree.html#a73450649dc6e54b5b94516c468523e45"><code>TTree::Draw</code></a> interface, which allows to instantaneously generate <b>plots</b> with trends, correlations or histograms that are also sent to the QC database.</p>
<div class="image">
<img src="images/trending-task.png"  alt="TrendingTask"/>
</div>
<h3>Configuration</h3>
<p>As this class is a post-processing task, it inherits also its configuration JSON template. It extends it, though, with two additional lists - <code>"dataSources"</code> and <code>"plots"</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;qc&quot;: {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    ...</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &quot;postprocessing&quot;: {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      &quot;ExampleTrend&quot;: {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &quot;active&quot;: &quot;true&quot;,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        &quot;className&quot;: &quot;o2::quality_control::postprocessing::TrendingTask&quot;,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        &quot;moduleName&quot;: &quot;QualityControl&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        &quot;detectorName&quot;: &quot;TST&quot;,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        &quot;dataSources&quot;: [],</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        &quot;plots&quot;: [],</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        &quot;initTrigger&quot;: [ &quot;once&quot; ],</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        &quot;updateTrigger&quot;: [ &quot;5 seconds&quot; ],</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        &quot;stopTrigger&quot;: []</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;      }</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  }</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div></div><!-- fragment --><p>Data sources are defined by filling the corresponding structure, as in the example below. For the key <code>"type"</code> use the value <code>"repository"</code> if you access a Monitor Object and <code>"repository-quality"</code> if that should be a Quality (this will be unified in the future). The <code>"names"</code> array should point to one or more objects under a common <code>"path"</code> in the repository. The values of <code>"reductorName"</code> and <code>"moduleName"</code> should point to a full name of a data Reductor and a library where it is located. One can use the Reductors available in the <code>Common</code> module or write their own by inheriting the interface class.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        ...</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &quot;dataSources&quot;: [</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;          {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            &quot;type&quot;: &quot;repository&quot;,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            &quot;path&quot;: &quot;qc/TST/MO/QcTask&quot;,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &quot;names&quot;: [ &quot;example&quot; ],</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            &quot;reductorName&quot;: &quot;o2::quality_control_modules::common::TH1Reductor&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            &quot;moduleName&quot;: &quot;QcCommon&quot;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;          },</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;          {</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            &quot;type&quot;: &quot;repository-quality&quot;,</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            &quot;path&quot;: &quot;qc/TST/QO&quot;,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;            &quot;names&quot;: [ &quot;QcCheck&quot; ],</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            &quot;reductorName&quot;: &quot;o2::quality_control_modules::common::QualityReductor&quot;,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;            &quot;moduleName&quot;: &quot;QcCommon&quot;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;          }</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        ],</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        ...</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;}</div></div><!-- fragment --><p>Similarly, plots are defined by adding proper structures to the <code>"plots"</code> list, as shown below. The plot will be stored under the <code>"name"</code> value and it will have the <code>"title"</code> value shown on the top. The <code>"varexp"</code>, <code>"selection"</code> and <code>"option"</code> fields correspond to the arguments of the <a href="https://root.cern/doc/master/classTTree.html#a73450649dc6e54b5b94516c468523e45"><code>TTree::Draw</code></a> method. Optionally, one can use <code>"graphError"</code> to add x and y error bars to a graph, as in the first plot example. The <code>"name"</code> and <code>"varexp"</code> are the only compulsory arguments, others can be omitted to reduce configuration files size. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        ...</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &quot;plots&quot;: [</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;          {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            &quot;name&quot;: &quot;mean_of_histogram&quot;,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            &quot;title&quot;: &quot;Mean trend of the example histogram&quot;,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &quot;varexp&quot;: &quot;example.mean:time&quot;,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            &quot;selection&quot;: &quot;&quot;,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            &quot;option&quot;: &quot;*L&quot;,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            &quot;graphErrors&quot;: &quot;5:example.stddev&quot;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;          },</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;          {</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            &quot;name&quot;: &quot;histogram_of_means&quot;,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;            &quot;title&quot;: &quot;Distribution of mean values in the example histogram&quot;,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            &quot;varexp&quot;: &quot;example.mean&quot;,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;            &quot;selection&quot;: &quot;&quot;,</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;            &quot;option&quot;: &quot;&quot;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;          },</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;          {</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            &quot;name&quot;: &quot;example_quality&quot;,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;            &quot;title&quot;: &quot;Trend of the example histogram&#39;s quality&quot;,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            &quot;varexp&quot;: &quot;QcCheck.name:time&quot;,</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            &quot;selection&quot;: &quot;&quot;,</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            &quot;option&quot;: &quot;*&quot;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;          }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        ],</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        ...</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div></div><!-- fragment --><p>← Go back to Modules Development | ../README.md "↑ Go to the Table of Content ↑" | Continue to Advanced Topics → </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
