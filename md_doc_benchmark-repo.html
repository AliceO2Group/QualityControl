<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>QualityControl: Repository backends benchmark</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QualityControl
   &#160;<span id="projectnumber">1.5.1</span>
   </div>
   <div id="projectbrief">O2 Data Quality Control Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_benchmark-repo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Repository backends benchmark </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There is a class, a binary and a script to benchmark backends for the QC repository.</p>
<h3><a class="el" href="runRepositoryBenchmark_8cxx.html">runRepositoryBenchmark.cxx</a></h3>
<p>It is the executable that is called to simulate a client for the repository. It accepts a large number of options, not detailed here. Executable is called <code>repositoryBenchmark</code>.</p>
<p><em>Example execution :</em> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;o2-qc-repo-benchmark --max-iterations 30</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                    --id benchmarkTask_0</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                    --mq-config ~/alice/QualityControl/Framework/alfa.json</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                    --number-tasks 1</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                    --delete 0</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                    --control static</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                    --size-objects 10</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                    --number-objects 10</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                    --monitoring-url influxdb-udp://aido2mon-gpn.cern.ch:8087</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                    --task-name benchmarkTask_0</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                    --database-backend CCDB</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                    --database-name &quot;&quot;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                    --database-username &quot;&quot;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                    --database-password &quot;&quot;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                    --database-url ccdb-test.cern.ch:8080</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                    --monitoring-threaded 0</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                    --monitoring-threaded-interval 5</div></div><!-- fragment --><h3>RepositoryBenchmark</h3>
<p>The FairMQ device that does the actual publication to the repository. It can be configured in terms of objects' size, number of objects published, number of iterations, etc...</p>
<h3>repo_benchmark.sh</h3>
<p>A shell script to drive the whole benchmark. It iterates over the possible values of the variables (number of tasks, number of objects published per second, size of the objects) and remotely launches repositoryBenchmark as many times needed on the machine(s).</p>
<h2>How to start using it</h2>
<ol type="1">
<li>Edit the bash script <code>repo_benchmarks.sh</code> by modifying the variables NB_OF_TASKS, NB_OF_OBJECTS and SIZE_OBJECTS at the top. They arrays that should contain all the possible values for these three variables.</li>
<li>Find a set of machines and assign the variable NODES accordingly.</li>
<li>Edit the other variables if needed, such as NUMBER_CYCLES, MONITORING_URL DB_*.</li>
<li>Make sure that the QC is installed on the client nodes and that there is the key there for a password-less ssh connection. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
